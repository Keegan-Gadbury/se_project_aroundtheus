!function(){var e={240:function(){}},t={};function o(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,o),s.exports}o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";class e{constructor(e,t,o){let{name:n,link:r}=e;this._name=n,this._link=r,this._cardSelector=t,this._handleImageClick=o}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeIcon()})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)}))}_handleDeleteCard(){this._cardElement.remove()}_handleLikeIcon(){this._likeButton.classList.toggle("card__like-button_active")}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__subtitle"),this._cardImage.src=this._link,this._cardTitle.textContent=this._name,this._cardImage.alt=this._name,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formEl=t,this._inputEls=[...this._formEl.querySelectorAll(this._inputSelector)],this._submitButton=this._formEl.querySelector(this._submitButtonSelector)}_setEventListeners(){this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState(this._submitButton)}))}))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_toggleButtonState(){this._hasInvalidInput(this._inputEls)?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_showInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}enableValidation(){this._formEl.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._formEl.reset(),this._toggleButtonState(),this._inputEls.forEach((e=>{this._hideInputError(e)}))}}class n{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".modal__close"),this._handleEscClose=this._handleEscClose.bind(this),this._closeOnRemoteClick=this._closeOnRemoteClick.bind(this)}open(){this._popupElement.classList.add("modal__opened"),document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("mousedown",this._closeOnRemoteClick)}close(){this._popupElement.classList.remove("modal__opened"),document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("mousedown",this._closeOnRemoteClick)}_handleEscClose(e){"Escape"===e.key&&this.close()}_closeOnRemoteClick(e){e.target===e.currentTarget&&this.close()}setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()}))}}class r extends n{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t}close(){this._popupForm.reset(),super.close()}_getInputValues(){const e=this._popupForm.querySelectorAll(".modal__input"),t={};return e.forEach((e=>t[e.name]=e.value)),t}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}}class s{constructor(e,t){let{items:o,renderer:n}=e;this._items=o,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach(this._renderer)}addItem(e){this._container.prepend(e)}}var i=o(240),a=o.n(i);const l=document.querySelector("#profile-edit-modal"),c=document.querySelector(".cards__list"),u=document.querySelector("#profile-add-modal"),d=l.querySelector(".modal__form"),m=(u.querySelector(".modal__form"),document.querySelector("#profile-edit-button")),_=(l.querySelector(".modal__close"),document.querySelector("#profile-add-button")),p=(document.querySelector("#profile-modal-add-close-button"),document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#profile-title-input")),h=document.querySelector("#profile-description-input");d.querySelector("#editModalSubmitButton"),d.querySelector("#add-create-button"),document.querySelector("#profile-add-title-input"),document.querySelector("#profile-add-link-input"),document.querySelector("#preview-image-modal"),document.querySelector("#preview-modal-close-button"),document.querySelector("#preview-image-card"),document.querySelector("#preview-image-title");const E={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:".modal__error",errorClass:".modal__input_type_error"},f=(l.querySelector(".modal__form"),document.querySelector("#edit-profile-image-modal")),v=document.querySelector("#profile-image-edit-button"),S=new class{constructor(e,t){this._name=document.querySelector(e),this._about=document.querySelector(t)}getUserInfo(){return{name:this._name.textContent,about:this._about.textContent.trim()}}setUserInfo(e){let{title:t,description:o}=e;this._name.textContent=t,this._about.textContent=o}}("#profile-title","#profile-description"),y=new r("#profile-add-modal",(function(e){q(e),y.close()}));y.setEventListeners();const g=new r("#profile-edit-modal",(function(e){S.setUserInfo(e),g.close()}));g.setEventListeners();const b=new class extends n{constructor(e){super({popupSelector:e}),this._imageElement=document.querySelector("#preview-image-card"),this._imageCaption=document.querySelector("#preview-image-title")}open(e){this._imageElement.src=e.link,this._imageElement.alt=e.name,this._imageCaption.textContent=e.name,super.open()}}("#preview-image-modal");b.setEventListeners();const w=new s({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:q},".cards__list");function q(t){const o=new e(t,"#card-template",(()=>function(e){b.open(e)}(t))),n=o.getView();w.addItem(n)}new t(E,document.getElementById("edit-form")).enableValidation();const C=new t(E,document.getElementById("add-card-form"));C.enableValidation(),w.renderItems(),m.addEventListener("click",(()=>{const e=S.getUserInfo();p.value=e.name,h.value=e.about,g.open()})),_.addEventListener("click",(()=>{C.resetValidation(),y.open()})),v.addEventListener("click",(()=>{f.open()}));const k=new(a())({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"8b52eed6-ea2c-49bc-bea5-dd0cccf37995","Content-Type":"application/json"}});k.getInititalCards().then((e=>{w=new s({items:e,renderer:createCard},c),w.renderItems()})).catch((e=>{console.error(e)})),k.getUserInfo().then((e=>{newProfileInfo.setUserInfo(e),newProfileInfo.setProfileImage(e.avatar)})).catch((e=>{console.error(e)}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBa0JsQixNQUFRbUMsRUFBSzNILEtBQy9CMkcsRUFBd0JuQixNQUFRbUMsRUFBS04sTUFDckNRLEVBQWlCckQsTUFBTSxJQUd6QmlDLEVBQWlCaEcsaUJBQWlCLFNBQVMsS0FDekMySCxFQUFpQnRFLGtCQUNqQjRELEVBQVlsRCxNQUFNLElBR3BCdUMsRUFBdUJ0RyxpQkFBaUIsU0FBUyxLQUMvQ3FHLEVBQXNCdEMsTUFBTSxJQUs5QixNQUFNNkQsRUFBTSxJQUFJQyxJQUFKLENBQVEsQ0FDbEJDLFFBQVMsa0RBQ1RDLFFBQVMsQ0FDUEMsY0FBZSx1Q0FDZixlQUFnQixzQkFJcEJKLEVBQ0dLLG1CQUNBQyxNQUFNQyxJQUNMWCxFQUFjLElBQUl4QyxFQUNoQixDQUNFRSxNQUFPaUQsRUFDUGhELFNBQVVpRCxZQUVaeEMsR0FFRjRCLEVBQVlqQyxhQUFhLElBRTFCOEMsT0FBT0MsSUFDTkMsUUFBUUMsTUFBTUYsRUFBSSxJQUd0QlYsRUFDR2pCLGNBQ0F1QixNQUFNM0IsSUFDTGtDLGVBQWUzQixZQUFZUCxHQUMzQmtDLGVBQWVDLGdCQUFnQm5DLEVBQVNvQyxPQUFPLElBRWhETixPQUFPQyxJQUNOQyxRQUFRQyxNQUFNRixFQUFJLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL3ByYWN0aWN1bS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHRmdW5jdGlvbigpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcblx0XHRmdW5jdGlvbigpIHsgcmV0dXJuIG1vZHVsZTsgfTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIGRlZmluaXRpb24pIHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgbGluayB9LCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUljb24oKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5jYXJkX19kZWxldGUtYnV0dG9uXCJcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fc3VidGl0bGVcIik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtRWwgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9zdWJtaXRCdXR0b24pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRFbHMpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsLnJlc2V0KCk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9jbG9zZU9uUmVtb3RlQ2xpY2sgPSB0aGlzLl9jbG9zZU9uUmVtb3RlQ2xpY2suYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX19vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9jbG9zZU9uUmVtb3RlQ2xpY2spO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX19vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcclxuICAgICAgXCJtb3VzZWRvd25cIixcclxuICAgICAgdGhpcy5fY2xvc2VPblJlbW90ZUNsaWNrXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2Nsb3NlT25SZW1vdGVDbGljayhldnQpIHtcclxuICAgIGlmIChldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRzID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4gKGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpKTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgc2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2godGhpcy5fcmVuZGVyZXIpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRzICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUFkZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1tb2RhbFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0Rm9ybUVsZW1lbnQgPVxyXG4gIHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGRGb3JtRWxlbWVudCA9XHJcbiAgcHJvZmlsZUFkZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcblxyXG4vLyBCdXR0b25zIGFuZCBvdGhlciBET00gTm9kZXNcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRDbG9zZUJ1dHRvbiA9XHJcbiAgcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGRDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1tb2RhbC1hZGQtY2xvc2UtYnV0dG9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRTdWJtaXRCdXR0b24gPSBwcm9maWxlRWRpdEZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjZWRpdE1vZGFsU3VibWl0QnV0dG9uXCJcclxuKTtcclxucHJvZmlsZUVkaXRGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jcmVhdGUtYnV0dG9uXCIpO1xyXG5cclxuLy8gRm9ybSBEYXRhXHJcbmV4cG9ydCBjb25zdCBjYXJkVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1hZGQtdGl0bGUtaW5wdXRcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgY2FyZFVybElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1saW5rLWlucHV0XCIpO1xyXG5cclxuLy8gUHJldmlldyBNb2RhbCBEYXRhXHJcbmV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1pbWFnZS1tb2RhbFwiKTtcclxuZXhwb3J0IGNvbnN0IHByZXZpZXdJbWFnZUNsb3NlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3ByZXZpZXctbW9kYWwtY2xvc2UtYnV0dG9uXCJcclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBtb2RhbEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LWltYWdlLWNhcmRcIik7XHJcbmV4cG9ydCBjb25zdCBtb2RhbFRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctaW1hZ2UtdGl0bGVcIik7XHJcblxyXG4vLyBGb3JtIFZhbGlkYXRpb24gY2xhc3Nlc1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiLm1vZGFsX19lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwiLm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZU1vZGFsRm9ybSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlSW1hZ2VFZGl0UG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI2VkaXQtcHJvZmlsZS1pbWFnZS1tb2RhbFwiXHJcbik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlSW1hZ2VFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNwcm9maWxlLWltYWdlLWVkaXQtYnV0dG9uXCJcclxuKTtcclxuIiwiaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcblxyXG4vLyBJbXBvcnRpbmcgY2xhc3Nlc1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZVwiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIGluaXRpYWxDYXJkcyxcclxuICBwcm9maWxlRWRpdE1vZGFsLFxyXG4gIGNhcmRMaXN0RWwsXHJcbiAgcHJvZmlsZUFkZE1vZGFsLFxyXG4gIHByb2ZpbGVFZGl0Rm9ybUVsZW1lbnQsXHJcbiAgcHJvZmlsZUFkZEZvcm1FbGVtZW50LFxyXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxyXG4gIHByb2ZpbGVBZGRCdXR0b24sXHJcbiAgcHJvZmlsZUFkZENsb3NlQnV0dG9uLFxyXG4gIHByb2ZpbGVUaXRsZSxcclxuICBwcm9maWxlRGVzY3JpcHRpb24sXHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXHJcbiAgcHJvZmlsZUVkaXRTdWJtaXRCdXR0b24sXHJcbiAgY2FyZFRpdGxlSW5wdXQsXHJcbiAgY2FyZFVybElucHV0LFxyXG4gIHByZXZpZXdJbWFnZU1vZGFsLFxyXG4gIHByZXZpZXdJbWFnZUNsb3NlTW9kYWwsXHJcbiAgbW9kYWxJbWFnZSxcclxuICBtb2RhbFRleHQsXHJcbiAgcHJvZmlsZUltYWdlRWRpdEJ1dHRvbixcclxuICBwcm9maWxlSW1hZ2VFZGl0UG9wdXAsXHJcbiAgY29uZmlnLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbi8vIFVzZXIgSW5mb1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXCIjcHJvZmlsZS10aXRsZVwiLCBcIiNwcm9maWxlLWRlc2NyaXB0aW9uXCIpO1xyXG5cclxuLy8gQWRkIFBpY3R1cmUgUG9wdXBcclxuXHJcbmNvbnN0IGFkZFBpY1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjcHJvZmlsZS1hZGQtbW9kYWxcIixcclxuICBoYW5kbGVBZGRGb3JtU3VibWl0XHJcbik7XHJcbmFkZFBpY1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBFZGl0IFByb2ZpbGUgUG9wdXBcclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcclxuICBoYW5kbGVFZGl0UHJvZmlsZUZvcm1TdWJtaXRcclxuKTtcclxuZWRpdFByb2ZpbGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8gUHJldmlldyBNb2RhbFxyXG5cclxuY29uc3QgaW1hZ2VQcmV2aWV3ID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3ByZXZpZXctaW1hZ2UtbW9kYWxcIik7XHJcbmltYWdlUHJldmlldy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHsgaXRlbXM6IGluaXRpYWxDYXJkcywgcmVuZGVyZXI6IHJlbmRlckNhcmQgfSxcclxuICBcIi5jYXJkc19fbGlzdFwiXHJcbik7XHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsICgpID0+IGhhbmRsZUltYWdlQ2xpY2soZGF0YSkpO1xyXG4gIGNvbnN0IGVsZW1lbnQgPSBjYXJkLmdldFZpZXcoKTtcclxuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGVsZW1lbnQpO1xyXG59XHJcblxyXG4vLyBFZGl0IFByb2ZpbGUgRm9ybSBWYWxpZGF0b3JcclxuXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgY29uZmlnLFxyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdC1mb3JtXCIpXHJcbik7XHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8vIEFkZCBQaWN0dXJlIFZhbGlkYXRvclxyXG5cclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIGNvbmZpZyxcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC1jYXJkLWZvcm1cIilcclxuKTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vLyBDYXJkIFNlY3Rpb25cclxuXHJcbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcblxyXG4vLyBGdW5jdGlvbnNcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soZGF0YSkge1xyXG4gIGltYWdlUHJldmlldy5vcGVuKGRhdGEpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVBZGRGb3JtU3VibWl0KGRhdGEpIHtcclxuICByZW5kZXJDYXJkKGRhdGEpO1xyXG4gIGFkZFBpY1BvcHVwLmNsb3NlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUVkaXRQcm9maWxlRm9ybVN1Ym1pdChkYXRhKSB7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XHJcbiAgZWRpdFByb2ZpbGVNb2RhbC5jbG9zZSgpO1xyXG59XHJcblxyXG4vLyBFdmVudCBMaXN0ZW5lcnNcclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgZGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSBkYXRhLm5hbWU7XHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBkYXRhLmFib3V0O1xyXG4gIGVkaXRQcm9maWxlTW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbnByb2ZpbGVBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGFkZFBpY1BvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG5wcm9maWxlSW1hZ2VFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcHJvZmlsZUltYWdlRWRpdFBvcHVwLm9wZW4oKTtcclxufSk7XHJcblxyXG4vLyBBUEkgU2V0dXBcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjhiNTJlZWQ2LWVhMmMtNDliYy1iZWE1LWRkMGNjY2YzNzk5NVwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG5hcGlcclxuICAuZ2V0SW5pdGl0YWxDYXJkcygpXHJcbiAgLnRoZW4oKGNhcmRzKSA9PiB7XHJcbiAgICBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICB7XHJcbiAgICAgICAgaXRlbXM6IGNhcmRzLFxyXG4gICAgICAgIHJlbmRlcmVyOiBjcmVhdGVDYXJkLFxyXG4gICAgICB9LFxyXG4gICAgICBjYXJkTGlzdEVsXHJcbiAgICApO1xyXG4gICAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgfSk7XHJcblxyXG5hcGlcclxuICAuZ2V0VXNlckluZm8oKVxyXG4gIC50aGVuKCh1c2VySW5mbykgPT4ge1xyXG4gICAgbmV3UHJvZmlsZUluZm8uc2V0VXNlckluZm8odXNlckluZm8pO1xyXG4gICAgbmV3UHJvZmlsZUluZm8uc2V0UHJvZmlsZUltYWdlKHVzZXJJbmZvLmF2YXRhcik7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gIH0pO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IodXNlck5hbWVTZWxlY3RvciwgYWJvdXRTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9hYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYWJvdXRTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIGNvbnN0IHVzZXJJbmZvID0ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBhYm91dDogdGhpcy5fYWJvdXQudGV4dENvbnRlbnQudHJpbSgpLFxyXG4gICAgfTtcclxuICAgIHJldHVybiB1c2VySW5mbztcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgdGl0bGUsIGRlc2NyaXB0aW9uIH0pIHtcclxuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSB0aXRsZTtcclxuICAgIHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LWltYWdlLWNhcmRcIik7XHJcbiAgICB0aGlzLl9pbWFnZUNhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctaW1hZ2UtdGl0bGVcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKGRhdGEpIHtcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWx0ID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5faW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJuIiwiZ2V0dGVyIiwiX19lc01vZHVsZSIsImQiLCJhIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJuYW1lIiwibGluayIsInRoaXMiLCJfbmFtZSIsIl9saW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VJY29uIiwiX2RlbGV0ZUJ1dHRvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX2NhcmRJbWFnZSIsIl9jYXJkRWxlbWVudCIsInJlbW92ZSIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImdldFZpZXciLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2NhcmRUaXRsZSIsInNyYyIsInRleHRDb250ZW50IiwiYWx0IiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybUVsIiwiX2lucHV0RWxzIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zdWJtaXRCdXR0b24iLCJmb3JFYWNoIiwiaW5wdXRFbCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiX2hhc0ludmFsaWRJbnB1dCIsImV2ZXJ5IiwiYWRkIiwiZGlzYWJsZWQiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlbmFibGVWYWxpZGF0aW9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwicmVzZXRWYWxpZGF0aW9uIiwicmVzZXQiLCJpbnB1dEVsZW1lbnQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2Nsb3NlQnV0dG9uIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIl9jbG9zZU9uUmVtb3RlQ2xpY2siLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0IiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0cyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsIlNlY3Rpb24iLCJzZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJhZGRJdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJwcm9maWxlRWRpdE1vZGFsIiwiY2FyZExpc3RFbCIsInByb2ZpbGVBZGRNb2RhbCIsInByb2ZpbGVFZGl0Rm9ybUVsZW1lbnQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVBZGRCdXR0b24iLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwiY29uZmlnIiwiZm9ybVNlbGVjdG9yIiwicHJvZmlsZUltYWdlRWRpdFBvcHVwIiwicHJvZmlsZUltYWdlRWRpdEJ1dHRvbiIsInVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsImFib3V0U2VsZWN0b3IiLCJfYWJvdXQiLCJnZXRVc2VySW5mbyIsImFib3V0IiwidHJpbSIsInNldFVzZXJJbmZvIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImFkZFBpY1BvcHVwIiwiZGF0YSIsInJlbmRlckNhcmQiLCJlZGl0UHJvZmlsZU1vZGFsIiwiaW1hZ2VQcmV2aWV3IiwiX2ltYWdlRWxlbWVudCIsIl9pbWFnZUNhcHRpb24iLCJjYXJkU2VjdGlvbiIsImNhcmQiLCJnZXRFbGVtZW50QnlJZCIsImFkZEZvcm1WYWxpZGF0b3IiLCJhcGkiLCJBcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJnZXRJbml0aXRhbENhcmRzIiwidGhlbiIsImNhcmRzIiwiY3JlYXRlQ2FyZCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwibmV3UHJvZmlsZUluZm8iLCJzZXRQcm9maWxlSW1hZ2UiLCJhdmF0YXIiXSwic291cmNlUm9vdCI6IiJ9