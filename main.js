!function(){var e={240:function(){}},t={};function o(n){var s=t[n];if(void 0!==s)return s.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";class e{constructor(e,t,o){let{name:n,link:s}=e;this._name=n,this._link=s,this._cardSelector=t,this._handleImageClick=o}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeIcon()})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this._name,this._link)}))}_handleDeleteCard(){this._cardElement.remove()}_handleLikeIcon(){this._likeButton.classList.toggle("card__like-button_active")}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__delete-button"),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardTitle=this._cardElement.querySelector(".card__subtitle"),this._cardImage.src=this._link,this._cardTitle.textContent=this._name,this._cardImage.alt=this._name,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formEl=t,this._inputEls=[...this._formEl.querySelectorAll(this._inputSelector)],this._submitButton=this._formEl.querySelector(this._submitButtonSelector)}_setEventListeners(){this._inputEls.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState(this._submitButton)}))}))}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_toggleButtonState(){this._hasInvalidInput(this._inputEls)?(this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0):(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1)}_showInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}enableValidation(){this._formEl.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._formEl.reset(),this._toggleButtonState(),this._inputEls.forEach((e=>{this._hideInputError(e)}))}}class n{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".modal__close"),this._handleEscClose=this._handleEscClose.bind(this),this._closeOnRemoteClick=this._closeOnRemoteClick.bind(this)}open(){this._popupElement.classList.add("modal__opened"),document.addEventListener("keydown",this._handleEscClose),this._popupElement.addEventListener("mousedown",this._closeOnRemoteClick)}close(){this._popupElement.classList.remove("modal__opened"),document.removeEventListener("keydown",this._handleEscClose),this._popupElement.removeEventListener("mousedown",this._closeOnRemoteClick)}_handleEscClose(e){"Escape"===e.key&&this.close()}_closeOnRemoteClick(e){e.target===e.currentTarget&&this.close()}setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()}))}}class s extends n{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t}close(){this._popupForm.reset(),super.close()}_getInputValues(){const e=this._popupForm.querySelectorAll(".modal__input"),t={};return e.forEach((e=>t[e.name]=e.value)),t}setEventListeners(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}}var r=o(240),i=o.n(r);const l=document.querySelector("#profile-edit-modal"),a=(document.querySelector(".cards__list"),document.querySelector("#profile-add-modal")),c=l.querySelector(".modal__form"),u=(a.querySelector(".modal__form"),document.querySelector("#profile-edit-button")),d=(l.querySelector(".modal__close"),document.querySelector("#profile-add-button")),m=(document.querySelector("#profile-modal-add-close-button"),document.querySelector(".profile__title"),document.querySelector(".profile__description"),document.querySelector("#profile-title-input")),_=document.querySelector("#profile-description-input");c.querySelector("#editModalSubmitButton"),c.querySelector("#add-create-button"),document.querySelector("#profile-add-title-input"),document.querySelector("#profile-add-link-input"),document.querySelector("#preview-image-modal"),document.querySelector("#preview-modal-close-button"),document.querySelector("#preview-image-card"),document.querySelector("#preview-image-title");const p={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:".modal__error",errorClass:".modal__input_type_error"},h=(l.querySelector(".modal__form"),new(i())({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"e8e1f960-35c9-4664-89bc-83e4470f5c58","Content-Type":"application/json"}}),new class{constructor(e,t){this._name=document.querySelector(e),this._about=document.querySelector(t)}getUserInfo(){return{name:this._name.textContent,about:this._about.textContent.trim()}}setUserInfo(e){let{title:t,description:o}=e;this._name.textContent=t,this._about.textContent=o}}("#profile-title","#profile-description")),E=new s("#profile-add-modal",(function(e){y(e),E.close()}));E.setEventListeners();const v=new s("#profile-edit-modal",(function(e){h.setUserInfo(e),v.close()}));v.setEventListeners();const f=new class extends n{constructor(e){super({popupSelector:e}),this._imageElement=document.querySelector("#preview-image-card"),this._imageCaption=document.querySelector("#preview-image-title")}open(e){this._imageElement.src=e.link,this._imageElement.alt=e.name,this._imageCaption.textContent=e.name,super.open()}}("#preview-image-modal");f.setEventListeners();const S=new class{constructor(e,t){let{items:o,renderer:n}=e;this._items=o,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach(this._renderer)}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:y},".cards__list");function y(t){const o=new e(t,"#card-template",(()=>function(e){f.open(e)}(t))),n=o.getView();S.addItem(n)}new t(p,document.getElementById("edit-form")).enableValidation();const g=new t(p,document.getElementById("add-card-form"));g.enableValidation(),S.renderItems(),u.addEventListener("click",(()=>{const e=h.getUserInfo();m.value=e.name,_.value=e.about,v.open()})),d.addEventListener("click",(()=>{g.resetValidation(),E.open()}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBUXlCLEVBQUtqSCxLQUMvQitGLEVBQXdCUCxNQUFReUIsRUFBS04sTUFDckNRLEVBQWlCM0MsTUFBTSxJQUd6QnFCLEVBQWlCcEYsaUJBQWlCLFNBQVMsS0FDekMySCxFQUFpQnRFLGtCQUNqQmtELEVBQVl4QyxNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovL3ByYWN0aWN1bS93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHRmdW5jdGlvbigpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcblx0XHRmdW5jdGlvbigpIHsgcmV0dXJuIG1vZHVsZTsgfTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIGRlZmluaXRpb24pIHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqLCBwcm9wKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKTsgfSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgbGluayB9LCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUljb24oKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIGdldFZpZXcoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5jYXJkX19kZWxldGUtYnV0dG9uXCJcclxuICAgICk7XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fc3VidGl0bGVcIik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtRWwgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gWy4uLnRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSh0aGlzLl9zdWJtaXRCdXR0b24pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRFbHMpKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsID0gdGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsLnJlc2V0KCk7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgICB0aGlzLl9jbG9zZU9uUmVtb3RlQ2xpY2sgPSB0aGlzLl9jbG9zZU9uUmVtb3RlQ2xpY2suYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX19vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9jbG9zZU9uUmVtb3RlQ2xpY2spO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX19vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcclxuICAgICAgXCJtb3VzZWRvd25cIixcclxuICAgICAgdGhpcy5fY2xvc2VPblJlbW90ZUNsaWNrXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2Nsb3NlT25SZW1vdGVDbGljayhldnQpIHtcclxuICAgIGlmIChldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldCkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRzID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4gKGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWUpKTtcclxuICAgIHJldHVybiBpbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgIEVsZW1lbnRzICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRMaXN0RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19saXN0XCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUFkZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1tb2RhbFwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0Rm9ybUVsZW1lbnQgPVxyXG4gIHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGRGb3JtRWxlbWVudCA9XHJcbiAgcHJvZmlsZUFkZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcblxyXG4vLyBCdXR0b25zIGFuZCBvdGhlciBET00gTm9kZXNcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWVkaXQtYnV0dG9uXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRDbG9zZUJ1dHRvbiA9XHJcbiAgcHJvZmlsZUVkaXRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZVwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtYWRkLWJ1dHRvblwiKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBZGRDbG9zZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1tb2RhbC1hZGQtY2xvc2UtYnV0dG9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCJcclxuKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVUaXRsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLXRpdGxlLWlucHV0XCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRTdWJtaXRCdXR0b24gPSBwcm9maWxlRWRpdEZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjZWRpdE1vZGFsU3VibWl0QnV0dG9uXCJcclxuKTtcclxucHJvZmlsZUVkaXRGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jcmVhdGUtYnV0dG9uXCIpO1xyXG5cclxuLy8gRm9ybSBEYXRhXHJcbmV4cG9ydCBjb25zdCBjYXJkVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIjcHJvZmlsZS1hZGQtdGl0bGUtaW5wdXRcIlxyXG4pO1xyXG5leHBvcnQgY29uc3QgY2FyZFVybElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWFkZC1saW5rLWlucHV0XCIpO1xyXG5cclxuLy8gUHJldmlldyBNb2RhbCBEYXRhXHJcbmV4cG9ydCBjb25zdCBwcmV2aWV3SW1hZ2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1pbWFnZS1tb2RhbFwiKTtcclxuZXhwb3J0IGNvbnN0IHByZXZpZXdJbWFnZUNsb3NlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3ByZXZpZXctbW9kYWwtY2xvc2UtYnV0dG9uXCJcclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBtb2RhbEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LWltYWdlLWNhcmRcIik7XHJcbmV4cG9ydCBjb25zdCBtb2RhbFRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctaW1hZ2UtdGl0bGVcIik7XHJcblxyXG4vLyBGb3JtIFZhbGlkYXRpb24gY2xhc3Nlc1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwiLm1vZGFsX19lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwiLm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZU1vZGFsRm9ybSA9IHByb2ZpbGVFZGl0TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuIiwiaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcblxyXG4vLyBJbXBvcnRpbmcgY2xhc3Nlc1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCB7IEZvcm1WYWxpZGF0b3IgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZVwiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIGluaXRpYWxDYXJkcyxcclxuICBwcm9maWxlRWRpdE1vZGFsLFxyXG4gIGNhcmRMaXN0RWwsXHJcbiAgcHJvZmlsZUFkZE1vZGFsLFxyXG4gIHByb2ZpbGVFZGl0Rm9ybUVsZW1lbnQsXHJcbiAgcHJvZmlsZUFkZEZvcm1FbGVtZW50LFxyXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxyXG4gIHByb2ZpbGVBZGRCdXR0b24sXHJcbiAgcHJvZmlsZUFkZENsb3NlQnV0dG9uLFxyXG4gIHByb2ZpbGVUaXRsZSxcclxuICBwcm9maWxlRGVzY3JpcHRpb24sXHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQsXHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQsXHJcbiAgcHJvZmlsZUVkaXRTdWJtaXRCdXR0b24sXHJcbiAgY2FyZFRpdGxlSW5wdXQsXHJcbiAgY2FyZFVybElucHV0LFxyXG4gIHByZXZpZXdJbWFnZU1vZGFsLFxyXG4gIHByZXZpZXdJbWFnZUNsb3NlTW9kYWwsXHJcbiAgbW9kYWxJbWFnZSxcclxuICBtb2RhbFRleHQsXHJcbiAgY29uZmlnLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbi8vIEFQSSBTZXR1cFxyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiZThlMWY5NjAtMzVjOS00NjY0LTg5YmMtODNlNDQ3MGY1YzU4XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbi8vIFVzZXIgSW5mb1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXCIjcHJvZmlsZS10aXRsZVwiLCBcIiNwcm9maWxlLWRlc2NyaXB0aW9uXCIpO1xyXG5cclxuLy8gQWRkIFBpY3R1cmUgUG9wdXBcclxuXHJcbmNvbnN0IGFkZFBpY1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgXCIjcHJvZmlsZS1hZGQtbW9kYWxcIixcclxuICBoYW5kbGVBZGRGb3JtU3VibWl0XHJcbik7XHJcbmFkZFBpY1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBFZGl0IFByb2ZpbGUgUG9wdXBcclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICBcIiNwcm9maWxlLWVkaXQtbW9kYWxcIixcclxuICBoYW5kbGVFZGl0UHJvZmlsZUZvcm1TdWJtaXRcclxuKTtcclxuZWRpdFByb2ZpbGVNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8gUHJldmlldyBNb2RhbFxyXG5cclxuY29uc3QgaW1hZ2VQcmV2aWV3ID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3ByZXZpZXctaW1hZ2UtbW9kYWxcIik7XHJcbmltYWdlUHJldmlldy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHsgaXRlbXM6IGluaXRpYWxDYXJkcywgcmVuZGVyZXI6IHJlbmRlckNhcmQgfSxcclxuICBcIi5jYXJkc19fbGlzdFwiXHJcbik7XHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoZGF0YSkge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsICgpID0+IGhhbmRsZUltYWdlQ2xpY2soZGF0YSkpO1xyXG4gIGNvbnN0IGVsZW1lbnQgPSBjYXJkLmdldFZpZXcoKTtcclxuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGVsZW1lbnQpO1xyXG59XHJcblxyXG4vLyBFZGl0IFByb2ZpbGUgRm9ybSBWYWxpZGF0b3JcclxuXHJcbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgY29uZmlnLFxyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdC1mb3JtXCIpXHJcbik7XHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8vIEFkZCBQaWN0dXJlIFZhbGlkYXRvclxyXG5cclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxyXG4gIGNvbmZpZyxcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFkZC1jYXJkLWZvcm1cIilcclxuKTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG4vLyBDYXJkIFNlY3Rpb25cclxuXHJcbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcblxyXG4vLyBGdW5jdGlvbnNcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soZGF0YSkge1xyXG4gIGltYWdlUHJldmlldy5vcGVuKGRhdGEpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVBZGRGb3JtU3VibWl0KGRhdGEpIHtcclxuICByZW5kZXJDYXJkKGRhdGEpO1xyXG4gIGFkZFBpY1BvcHVwLmNsb3NlKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUVkaXRQcm9maWxlRm9ybVN1Ym1pdChkYXRhKSB7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XHJcbiAgZWRpdFByb2ZpbGVNb2RhbC5jbG9zZSgpO1xyXG59XHJcblxyXG4vLyBFdmVudCBMaXN0ZW5lcnNcclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgZGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSBkYXRhLm5hbWU7XHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBkYXRhLmFib3V0O1xyXG4gIGVkaXRQcm9maWxlTW9kYWwub3BlbigpO1xyXG59KTtcclxuXHJcbnByb2ZpbGVBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGFkZFBpY1BvcHVwLm9wZW4oKTtcclxufSk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih1c2VyTmFtZVNlbGVjdG9yLCBhYm91dFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyTmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Fib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgY29uc3QgdXNlckluZm8gPSB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIGFib3V0OiB0aGlzLl9hYm91dC50ZXh0Q29udGVudC50cmltKCksXHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHVzZXJJbmZvO1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oeyB0aXRsZSwgZGVzY3JpcHRpb24gfSkge1xyXG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IHRpdGxlO1xyXG4gICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctaW1hZ2UtY2FyZFwiKTtcclxuICAgIHRoaXMuX2ltYWdlQ2FwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJldmlldy1pbWFnZS10aXRsZVwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LnNyYyA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hbHQgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9pbWFnZUNhcHRpb24udGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIHNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKHRoaXMuX3JlbmRlcmVyKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm4iLCJnZXR0ZXIiLCJfX2VzTW9kdWxlIiwiZCIsImEiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJDYXJkIiwiY29uc3RydWN0b3IiLCJfcmVmIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlSW1hZ2VDbGljayIsIm5hbWUiLCJsaW5rIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfbGlrZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlTGlrZUljb24iLCJfZGVsZXRlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfY2FyZEltYWdlIiwiX2NhcmRFbGVtZW50IiwicmVtb3ZlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiZ2V0VmlldyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZFRpdGxlIiwic3JjIiwidGV4dENvbnRlbnQiLCJhbHQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWwiLCJfaW5wdXRFbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsImZvckVhY2giLCJpbnB1dEVsIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJfaGFzSW52YWxpZElucHV0IiwiZXZlcnkiLCJhZGQiLCJkaXNhYmxlZCIsImVycm9yTWVzc2FnZUVsIiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJyZXNldCIsImlucHV0RWxlbWVudCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfY2xvc2VCdXR0b24iLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiX2Nsb3NlT25SZW1vdGVDbGljayIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRzIiwiaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicHJvZmlsZUVkaXRNb2RhbCIsInByb2ZpbGVBZGRNb2RhbCIsInByb2ZpbGVFZGl0Rm9ybUVsZW1lbnQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVBZGRCdXR0b24iLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwiY29uZmlnIiwiZm9ybVNlbGVjdG9yIiwidXNlckluZm8iLCJBcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsImF1dGhvcml6YXRpb24iLCJ1c2VyTmFtZVNlbGVjdG9yIiwiYWJvdXRTZWxlY3RvciIsIl9hYm91dCIsImdldFVzZXJJbmZvIiwiYWJvdXQiLCJ0cmltIiwic2V0VXNlckluZm8iLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiYWRkUGljUG9wdXAiLCJkYXRhIiwicmVuZGVyQ2FyZCIsImVkaXRQcm9maWxlTW9kYWwiLCJpbWFnZVByZXZpZXciLCJfaW1hZ2VFbGVtZW50IiwiX2ltYWdlQ2FwdGlvbiIsImNhcmRTZWN0aW9uIiwic2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiY2FyZCIsImdldEVsZW1lbnRCeUlkIiwiYWRkRm9ybVZhbGlkYXRvciJdLCJzb3VyY2VSb290IjoiIn0=